{"version":3,"sources":["webpack:///src/app/PAGES_ASSO/asso-map-home/asso-map-home.page.html","webpack:///src/app/PAGES_ASSO/asso-map-home/asso-map-home-routing.module.ts","webpack:///src/app/PAGES_ASSO/asso-map-home/asso-map-home.module.ts","webpack:///src/app/PAGES_ASSO/asso-map-home/asso-map-home.page.scss","webpack:///src/app/PAGES_ASSO/asso-map-home/asso-map-home.page.ts"],"names":["routes","path","component","AssoMapHomePageRoutingModule","imports","forChild","exports","AssoMapHomePageModule","declarations","AssoMapHomePage","Afs","router","createMap","parcThabor","lat","lng","zoomLevel","maphome","center","zoom","renderer","attribution","minZoom","maxZoom","addTo","markerinvasion","setTimeout","invalidateSize","homeMarker","bindPopup","closeButton","pop","id","mark","draggable","on","clickEvent","goTo","size$","queryObservable","pipe","size","collection","valueChanges","console","log","subscribe","queriedItems","obj","i","titre","geolat","geolng","addMarker","next","postID","navigate","selector","template"],"mappings":"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","file":"asso-map-home-asso-map-home-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Proche de chez vous</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content>\\n\\n    <div id=\\\"maphome\\\" ></div>\\n    <script *ngFor=\\\"let item of items | async\\\">\\n      \\n    </script>\\n    \\n   \\n \\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AssoMapHomePage } from './asso-map-home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AssoMapHomePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AssoMapHomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AssoMapHomePageRoutingModule } from './asso-map-home-routing.module';\n\nimport { AssoMapHomePage } from './asso-map-home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AssoMapHomePageRoutingModule\n  ],\n  declarations: [AssoMapHomePage]\n})\nexport class AssoMapHomePageModule {}\n","export default \"#maphome {\\n  min-height: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUEFHRVNfQVNTTy9hc3NvLW1hcC1ob21lL0M6XFxVc2Vyc1xcVXRpbGlzYXRldXJcXHVuaWJlZS9zcmNcXGFwcFxcUEFHRVNfQVNTT1xcYXNzby1tYXAtaG9tZVxcYXNzby1tYXAtaG9tZS5wYWdlLnNjc3MiLCJzcmMvYXBwL1BBR0VTX0FTU08vYXNzby1tYXAtaG9tZS9hc3NvLW1hcC1ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGdCQUFnQjtBQ0FsQiIsImZpbGUiOiJzcmMvYXBwL1BBR0VTX0FTU08vYXNzby1tYXAtaG9tZS9hc3NvLW1hcC1ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4jbWFwaG9tZXtcclxuICBtaW4taGVpZ2h0OiAxMDAlO1xyXG59IiwiI21hcGhvbWUge1xuICBtaW4taGVpZ2h0OiAxMDAlO1xufVxuIl19 */\";","import { Router } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\nimport { Component, AfterViewInit } from '@angular/core';\nimport * as L from 'leaflet'\nimport { Subject } from 'rxjs';\n\nimport \"leaflet/dist/images/marker-shadow.png\";\nimport \"leaflet/dist/images/marker-icon.png\";\nimport \"leaflet/dist/images/marker-icon-2x.png\";\n\n@Component({\n  selector: 'app-asso-map-home',\n  templateUrl: './asso-map-home.page.html',\n  styleUrls: ['./asso-map-home.page.scss'],\n})\nexport class AssoMapHomePage implements AfterViewInit {\n  maphome: L.Map\n  items\n  obj\n  constructor(private Afs: AngularFirestore, private router: Router) { }\n\n  ngAfterViewInit() {\n    //this.createMap();\n    this.createMap();\n  }\n\n  createMap() {\n    const parcThabor = {\n      lat: 48.3,\n      lng: 4.083\n    };\n    const zoomLevel = 14;\n    this.maphome = L.map('maphome', {\n      center: [parcThabor.lat, parcThabor.lng],\n      zoom: zoomLevel,\n      renderer: L.canvas()\n    })\n\n    L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'donn&eacute;es &copy; <a href=\"//osm.org/copyright\">OpenStreetMap</a>/ODbL - rendu <a href=\"//openstreetmap.fr\">OSM France</a>',\n      minZoom: 1,\n      maxZoom: 20\n    }).addTo(this.maphome);\n\n    this.markerinvasion()\n\n\n    // force map to resize on init\n    setTimeout(() => {\n      this.maphome.invalidateSize();\n    }, 0);\n  }\n\n  addHomeMarker() {\n    const homeMarker = L.marker({ lat: 48.4, lng: 4.0833 })\n    homeMarker.bindPopup('This is the voice', {\n      closeButton: true\n    })\n    homeMarker.addTo(this.maphome)\n\n  } \n\n  addMarker(lat, lng, pop, id) {\n    const mark = L.marker({ lat: lat, lng: lng }, { draggable: false })\n    mark.bindPopup(pop, {\n      closeButton: true\n    }).on('click', (clickEvent)=>{this.goTo(id)})\n    mark.addTo(this.maphome)\n  }\n\n  markerinvasion() {\n    \n  const size$ = new Subject<string>();\n  const queryObservable = size$.pipe(\n    switchMap(size => \n      this.Afs.collection('publicevents'/*, ref => ref.where('size', '==', size)*/).valueChanges()\n    )\n  );\n  // is scalar\n  console.log (queryObservable)\n  \n  // subscribe to changes\n  queryObservable.subscribe(queriedItems => {\n    // [{...}, {...}]\n    this.obj= queriedItems;\n    console.log(queriedItems);  \n    console.log(queriedItems); \n    for (var i = 0; i < 2; i++) {\n      console.log(this.obj[i].titre);\n      console.log(this.obj[i].geolat);\n      console.log(this.obj[i].geolng);\n      this.addMarker(this.obj[i].geolat,this.obj[i].geolng, this.obj[i].titre, this.obj[i].id )\n      //Do something\n  }\n    \n  \n  });\n  \n  \n  \n  \n  \n  // trigger the query\n  size$.next('large');\n  \n  // re-trigger the query!!!\n  size$.next('small');\n\n   //this.bo() \n\n}\nbo(){\n  console.log(this.obj)\n  \n  \n  for (var i = 0; i < 5; i++) {\n      console.log(this.obj[i].titre);\n      //Do something\n  }\n}\ngoTo(postID: string){\n  this.router.navigate(['/detailevents/'+ postID])\n} \n}\n"]}