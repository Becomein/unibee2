{"version":3,"sources":["./src/app/PAGES_BENE/bene-map/bene-map.page.html","./src/app/PAGES_BENE/bene-map/bene-map-routing.module.ts","./src/app/PAGES_BENE/bene-map/bene-map.module.ts","./src/app/PAGES_BENE/bene-map/bene-map.page.scss","./src/app/PAGES_BENE/bene-map/bene-map.page.ts"],"names":[],"mappings":"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","file":"bene-map-bene-map-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Proche de chez vous</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content>\\n\\n    <div id=\\\"maphome\\\" ></div>\\n    <script *ngFor=\\\"let item of items | async\\\">\\n      \\n    </script>\\n    \\n   \\n \\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { BeneMapPage } from './bene-map.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BeneMapPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class BeneMapPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { BeneMapPageRoutingModule } from './bene-map-routing.module';\n\nimport { BeneMapPage } from './bene-map.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    BeneMapPageRoutingModule\n  ],\n  declarations: [BeneMapPage]\n})\nexport class BeneMapPageModule {}\n","export default \"#maphome {\\n  min-height: 100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUEFHRVNfQkVORS9iZW5lLW1hcC9DOlxcVXNlcnNcXFV0aWxpc2F0ZXVyXFx1bmliZWUvc3JjXFxhcHBcXFBBR0VTX0JFTkVcXGJlbmUtbWFwXFxiZW5lLW1hcC5wYWdlLnNjc3MiLCJzcmMvYXBwL1BBR0VTX0JFTkUvYmVuZS1tYXAvYmVuZS1tYXAucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksZ0JBQWdCO0FDQXBCIiwiZmlsZSI6InNyYy9hcHAvUEFHRVNfQkVORS9iZW5lLW1hcC9iZW5lLW1hcC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuI21hcGhvbWV7XHJcbiAgICBtaW4taGVpZ2h0OiAxMDAlO1xyXG4gIH0iLCIjbWFwaG9tZSB7XG4gIG1pbi1oZWlnaHQ6IDEwMCU7XG59XG4iXX0= */\";","import { Router } from '@angular/router';\nimport { switchMap } from 'rxjs/operators';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\nimport { Component, AfterViewInit, OnDestroy } from '@angular/core';\nimport * as L from 'leaflet'\nimport { Subject } from 'rxjs';\n\nimport \"leaflet/dist/images/marker-shadow.png\";\nimport \"leaflet/dist/images/marker-icon.png\";\nimport \"leaflet/dist/images/marker-icon-2x.png\";\n\n@Component({\n  selector: 'app-bene-map',\n  templateUrl: './bene-map.page.html',\n  styleUrls: ['./bene-map.page.scss'],\n})\nexport class BeneMapPage implements AfterViewInit {\n  maphome: L.Map\n  items\n  obj\n  mark\n  queryObservable\n  eventObserver\n  constructor(private Afs: AngularFirestore, private router: Router) { }\n\n  ionViewWillEnter() {\n    console.log('ionwillenter')\n    console.log('ionwillenter')\n    console.log('ionwillenter')\n    console.log('ionwillenter')\n    console.log('ionwillenter')\n    console.log('ionwillenter')\n     this.markerinvasion(); }\n  ngAfterViewInit() {\n    this.createMap();\n  }\n\n\n  createMap() {\n    \n    this.maphome = L.map('maphome', {\n      center: [48.298246, 4.078672],\n      zoom: 12,\n      renderer: L.canvas()\n    })\n  }\n \n  addHomeMarker() {\n    const homeMarker = L.marker({ lat: 48.4, lng: 4.0833 })\n    homeMarker.bindPopup('This is the voice', {\n      closeButton: true\n    })\n    homeMarker.addTo(this.maphome)\n\n  } \n\n  addMarker(lat, lng, pop, id) {\n    this.mark = L.marker({ lat: lat, lng: lng }, { draggable: false })\n    this.mark.bindPopup(pop, {\n      closeButton: true\n    }).on('click', (clickEvent)=>{this.goTo(id)})\n    this.mark.addTo(this.maphome)\n  }\n \n\n  markerinvasion() {\n    L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: 'donn&eacute;es &copy; <a href=\"//osm.org/copyright\">OpenStreetMap</a>/ODbL - rendu <a href=\"//openstreetmap.fr\">OSM France</a>',\n      minZoom: 1,\n      maxZoom: 20\n    }).addTo(this.maphome);\n      // force map to resize on init\n      setTimeout(() => {\n        this.maphome.invalidateSize();\n      }, 0);\n    \n  const size$ = new Subject<string>();\n  this.queryObservable = size$.pipe(\n    switchMap(size => \n      this.Afs.collection('publicevents'/*, ref => ref.where('size', '==', size)*/).valueChanges()\n    )\n  );\n  // is scalar\n  console.log (this.queryObservable)\n  \n  // subscribe to changes\n  this.eventObserver =this.queryObservable.subscribe(queriedItems => {\n    // [{...}, {...}]\n    this.obj= queriedItems;\n    console.log(queriedItems);  \n    console.log(\"gg\"+ queriedItems.length);   \n    for (var i = 0; i < queriedItems.length; i++) {\n      console.log(this.obj[i].titre);\n      console.log(this.obj[i].geolat);\n      console.log(this.obj[i].geolng);\n      this.addMarker(this.obj[i].geolat,this.obj[i].geolng, this.obj[i].titre, this.obj[i].id )\n  }\n  }); \n  // trigger the query\n  size$.next('large'); \n\n}\ngoTo(postID: string){\n  this.router.navigate(['/bene-details/'+ postID])\n} \n\nionViewWillLeave(){\n  console.log('ondestroy')\nthis.eventObserver.unsubscribe();\n}\n\n}\n"],"sourceRoot":"webpack:///"}